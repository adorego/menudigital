{"version":3,"sources":["./src/app/public-menu/services/publicMenuFacade.service.ts","./src/app/public-menu/container/main-menu/main-menu.component.ts","./src/app/public-menu/container/main-menu/main-menu.component.html","./src/app/public-menu/public-menu-routing.module.ts","./src/app/public-menu/public-menu.module.ts"],"names":[],"mappings":"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","file":"public-menu-public-menu-module-es2015.js","sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { from, of } from \"rxjs\";\nimport { Observable} from \"rxjs\";\nimport { tap } from \"rxjs/operators\";\nimport { PublicMenuService } from \"src/app/core/http/publicMenu.service\";\nimport { Local } from \"src/app/core/models/local.model\";\nimport { SeccionesStateService } from \"src/app/core/state/secciones-state.service\";\nimport { LocalStateService } from \"src/app/core/state/local-state.service\";\nimport { SeccionMenu } from \"src/app/core/models/seccion-menu.model\";\n\n\n\n@Injectable()\nexport class PublicMenuFacade{\n    constructor(\n        private menuConfigurationService: PublicMenuService,\n        private seccionesStateService:SeccionesStateService,\n        private localStateService:LocalStateService){}\n\n    public getMenuDigital(nameUrl:string):void{\n        this.menuConfigurationService.getMenu(nameUrl)\n        .pipe(\n           tap((local) =>{\n               if(local){\n                    console.log('Local devuelto:', local, 'Secciones:', local.secciones);\n                    this.localStateService.setLocal(local);\n                    this.seccionesStateService.setSecciones(local.secciones);\n               }\n                \n           }) \n        )\n        .subscribe(\n            (local) => console.log('Local devuelto:', local)\n        )\n    }\n\n    public getSeccionesState():Observable<SeccionMenu[]>{\n        return this.seccionesStateService.secciones$;\n    }\n\n    public getLocalState():Observable<Local>{\n        return this.localStateService.local$;\n    }\n\n    /*\n    public getSeccionesPrueba():void{\n    \n        this.seccionesStateService.setSecciones(\n            [\n                {\n                    _id:\"76676\",\n                    titulo:\"Promociones\",\n                    descripcion:\"Descuentos temporales\",\n                    puesto:1,\n                    menuitems:[\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76676\",\n                            nombre:\"2x1 Familiar\",\n                            descripcion:\"2 Pizzas familiares por 1\",\n                            detalle_factura:\"2 Pizzas tamaño familiar\",\n                            imagenUrl:\"\",\n                            precio:78000,\n                            tipo:2,\n                            promocion:{\n                                _id:\"878789\",\n                                precioActual:78000,\n                                precioAnterior:97000,\n                                descuento:0.2\n                            }\n                        },\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76676\",\n                            nombre:\"2x1 Calzones\",\n                            descripcion:\"2 Calzones de los sabores que desee\",\n                            detalle_factura:\"2 Calzones\",\n                            imagenUrl:\"\",\n                            precio:68000,\n                            tipo:2,\n                            promocion:{\n                                _id:\"878791\",\n                                precioActual:68000,\n                                precioAnterior:99000,\n                                descuento:0.25\n                            }\n                        }\n                    ]\n                },\n                {\n                    _id:\"76677\",\n                    titulo:\"Pizzas\",\n                    descripcion:\"\",\n                    puesto:2,\n                    menuitems:[\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76677\",\n                            nombre:\"Pepperoni\",\n                            descripcion:\"Riquisima masa hecha de harina, con salsa de tomate y sabrosos pepperonis\",\n                            detalle_factura:\"Pizza\",\n                            precio:78000,\n                            tipo:1,\n                            tamanos:[\n                                {\n                                    _id:\"8989898\",\n                                    tamano:\"Grande\",\n                                    imagenUrl:\"\",\n                                    pedazos:8,\n                                    comensales:3,\n                                    cantsabores:2,\n                                    precio:78000,\n                                    predeterminado:true,\n                                    toppings:[\n                                        {\n                                            _id:\"5656565\",\n                                            nombre:\"Borde relleno\",\n                                            descripcion:\"Exquisito borde de queso catupiri\",\n                                            precio: 5000\n\n                                        },\n                                        {\n                                            _id:\"5656567\",\n                                            nombre:\"Extra Queso\",\n                                            descripcion:\"300 gs de queso extra en tu Pizza\",\n                                            precio: 5000\n                                        }\n\n                                    ]\n                                },\n                                {\n                                    _id:\"8989865\",\n                                    tamano:\"Familiar\",\n                                    imagenUrl:\"\",\n                                    pedazos:12,\n                                    comensales:4,\n                                    cantsabores:3,\n                                    precio:88000,\n                                    predeterminado:false,\n                                    toppings:[\n                                        {\n                                            _id:\"5656565\",\n                                            nombre:\"Borde relleno\",\n                                            descripcion:\"Exquisito borde de queso catupiri\",\n                                            precio: 6000\n\n                                        },\n                                        {\n                                            _id:\"5656567\",\n                                            nombre:\"Extra Queso\",\n                                            descripcion:\"400 gramos adicionales de queso extra en tu Pizza\",\n                                            precio: 6000\n                                        }\n\n                                    ]\n                                },\n                                {\n                                    _id:\"8989843\",\n                                    tamano:\"Gigante\",\n                                    imagenUrl:\"\",\n                                    pedazos:16,\n                                    comensales:4,\n                                    cantsabores:3,\n                                    precio:98000,\n                                    predeterminado:false,\n                                    toppings:[\n                                        {\n                                            _id:\"5656565\",\n                                            nombre:\"Borde relleno\",\n                                            descripcion:\"Exquisito borde de queso catupiri\",\n                                            precio: 6000\n\n                                        },\n                                        {\n                                            _id:\"5656567\",\n                                            nombre:\"Extra Queso\",\n                                            descripcion:\"500 gs de queso extra en tu Pizza\",\n                                            precio: 7000\n                                        }\n\n                                    ]\n                                }\n                            ],\n                            sabores:[\n                                {\n                                    _id:\"6767676\",\n                                    nombre:\"Pepperoni\",\n                                    descripcion:\"Riquisima masa con salsa de tomate exclusiva y pepperoni\",\n                                    costoAdicional:[\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:2,\n                                            costo_adicional: 3000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:1,\n                                            costo_adicional: 6000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989865\",\n                                            cantsabores:3,\n                                            costo_adicional: 4000,\n                                            operacion:1\n                                        }\n                                    ]\n                                },\n                                {\n                                    _id:\"09097878\",\n                                    nombre:\"Española\",\n                                    descripcion:\"Riquisima masa con salsa de tomate exclusiva y pepperoni\",\n                                    costoAdicional:[\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:2,\n                                            costo_adicional: 6000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:1,\n                                            costo_adicional: 8000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989865\",\n                                            cantsabores:3,\n                                            costo_adicional: 6000,\n                                            operacion:1\n                                        }\n                                    ]\n                                },\n                                {\n                                    _id:\"09097878\",\n                                    nombre:\"Napolitana\",\n                                    descripcion:\"Riquisima masa con salsa de tomate exclusiva y pepperoni\"\n                                }\n                            ]\n                            \n                            \n                        }\n                    ]\n                },\n                {\n                    _id:\"76678\",\n                    titulo:\"Calzones\",\n                    descripcion:\"\",\n                    puesto:3,\n                    menuitems:[\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76678\",\n                            nombre:\"Napolitano\",\n                            descripcion:\"Riquisima masa hecha de harina, con salsa de tomate y sabrosos pepperonis\",\n                            detalle_factura:\"Calzone sabor napolitano\",\n                            precio:78000,\n                            tipo:2\n                        }\n                    ]\n                }\n            ]\n        )\n    \n    \n    \n    \n    \n    \n    }\n    */\n}","import { Component, OnDestroy, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\nimport { MatCheckbox } from '@angular/material/checkbox';\nimport { ActivatedRoute } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\nimport { shareReplay } from 'rxjs/operators';\nimport { Local } from 'src/app/core/models/local.model';\nimport { MenuItemPersonalizado } from 'src/app/core/models/menuitem-personalizado.model';\nimport { MenuItem } from 'src/app/core/models/menuItem.model';\nimport { SeccionMenu } from 'src/app/core/models/seccion-menu.model';\nimport { PublicMenuFacade } from '../../services/publicMenuFacade.service';\n\n@Component({\n  selector: 'app-main-menu',\n  templateUrl: './main-menu.component.html',\n  styleUrls: ['./main-menu.component.scss']\n})\nexport class MainMenuComponent implements OnInit, OnDestroy {\n  nombrelocal:string;\n  private sub:Subscription;\n  private subLocalState:Subscription;\n\n  //Secciones del Menu\n  secciones$:Observable<SeccionMenu[]>;\n\n  //Nombre del local\n  local$:Observable<Local>;\n\n  //MenuItem\n  cantidad:number=1;//Selector de cantidades de un MenuItem\n  imagenAlternativa=\"../../../../assets/camara.png\";\n\n  //Seleccion de tamaños\n  tamanos:boolean[];\n  @ViewChildren('tamanocheckbox') components:QueryList<MatCheckbox>;\n\n  //\n  lista_detalles:MenuItemPersonalizado = {};\n\n  constructor(private route: ActivatedRoute, private publicMenuFacade:PublicMenuFacade) {\n\n   }\n  \n\n  ngOnInit(): void {\n    //console.log('MainMenu, ngOnInit:', this.route.snapshot.params);\n    this.sub = this.route.params.subscribe(params => {\n      const nombrelocalParam = params['nombrelocal'];\n      this.publicMenuFacade.getMenuDigital(nombrelocalParam);\n      //this.publicMenuFacade.getSeccionesPrueba();\n    });\n    this.tamanos = new Array<boolean>();\n    this.secciones$ = this.publicMenuFacade.getSeccionesState()\n                      .pipe(shareReplay(1));\n    \n    \n    this.local$ = this.publicMenuFacade.getLocalState();\n    this.subLocalState = this.local$.subscribe(\n      (local) => {\n        if(local){\n          this.nombrelocal = local.nombreDelLocal;\n        }\n      }\n    )\n  }\n\n  ngAfterViewInit(){\n    console.log(this.components.toArray());\n  }\n  public agregar_carrito(menuitem:MenuItem){\n    console.log('Agregar a carrito,', menuitem, 'cantidad:', this.cantidad);\n  }\n\n  \n  public handleMinus() {\n    this.cantidad--;  \n  }\n  public handlePlus() {\n    this.cantidad++;    \n  }\n\n  ngOnDestroy(): void {\n    this.sub.unsubscribe();\n    this.subLocalState.unsubscribe();\n  }\n}\n","<div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"toolbar\">\n    <h1 fxFlex=\"50%\" class=\"toolbar_titulo\">MenuDigital de \"{{nombrelocal}}\"</h1>\n    <button mat-icon-button class=\"toolbar_cartButton\" aria-label=\"Icono del carrito\">\n        <mat-icon>shopping_cart</mat-icon>\n    </button>\n    \n</div>\n<div class=\"container\">\n        <div class=\"categoria\" *ngFor=\"let seccion of secciones$ | async\">\n            <h2>{{seccion.titulo}}</h2>\n            <div fxLayout=\"row wrap\" fxLayoutGap=\"30px\" class=\"menuitem\" >\n                <ng-container *ngFor=\"let menuitem of seccion.menuitems\">\n                    <mat-card fxFlex=\"25%\" class=\"mat-elevation-z8\">\n                        <mat-card-header>\n                            <mat-card-title>\n                                {{menuitem.nombre | titlecase}}\n                            </mat-card-title>\n                        </mat-card-header>\n                        <img mat-card-image src=\"{{menuitem.imagenUrl && menuitem.imagenUrl.length > 0 ? menuitem.imagenUrl: imagenAlternativa}}\">\n                        \n                        \n                        <mat-card-actions>\n                            <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n                                <div class=\"wrapper\" fxFlex=50%>\n                                    <button class=\"plusminus\" (click)=\"handleMinus()\">-</button>\n                                    <input type=\"number\" class=\"num\" [value]=\"cantidad\"  />\n                                    <button class=\"plusminus\" (click)=\"handlePlus()\">+</button>\n                                </div>\n                                <button fxFlex=50% class=\"button_agregar\" (click)=\"agregar_carrito(menuitem)\" mat-raised-button>Agregar</button>\n                            </div>    \n                              \n                        </mat-card-actions>\n                    </mat-card>\n                </ng-container>    \n            </div>\n             \n        </div>\n        \n    \n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MainMenuComponent } from './container/main-menu/main-menu.component';\n\nconst routes:Routes = [\n    {\n        path: '',\n        component: MainMenuComponent\n    }\n]\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n  })\nexport class PublicMenuRoutingModule { }","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MainMenuComponent } from './container/main-menu/main-menu.component';\nimport { PublicMenuRoutingModule } from './public-menu-routing.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { PublicMenuFacade } from './services/publicMenuFacade.service';\n\n\n\n@NgModule({\n  declarations: [MainMenuComponent],\n  imports: [\n    CommonModule,\n    PublicMenuRoutingModule,\n    SharedModule\n  ],\n  providers:[\n    PublicMenuFacade\n  ]\n})\nexport class PublicMenuModule { }\n"],"sourceRoot":"webpack:///"}