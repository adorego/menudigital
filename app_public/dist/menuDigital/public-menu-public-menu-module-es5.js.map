{"version":3,"sources":["webpack:///src/app/public-menu/services/publicMenuFacade.service.ts","webpack:///src/app/public-menu/container/main-menu/main-menu.component.ts","webpack:///src/app/public-menu/container/main-menu/main-menu.component.html","webpack:///src/app/public-menu/public-menu-routing.module.ts","webpack:///src/app/public-menu/public-menu.module.ts"],"names":["PublicMenuFacade","menuConfigurationService","seccionesStateService","localStateService","nameUrl","getMenu","pipe","local","console","log","secciones","setLocal","setSecciones","subscribe","secciones$","local$","MainMenuComponent","route","publicMenuFacade","cantidad","imagenAlternativa","lista_detalles","sub","params","nombrelocalParam","getMenuDigital","tamanos","Array","getSeccionesState","getLocalState","subLocalState","nombrelocal","nombreDelLocal","components","toArray","menuitem","unsubscribe","routes","path","component","PublicMenuRoutingModule","forChild","PublicMenuModule"],"mappings":"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","file":"public-menu-public-menu-module-es5.js","sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { from, of } from \"rxjs\";\nimport { Observable} from \"rxjs\";\nimport { tap } from \"rxjs/operators\";\nimport { PublicMenuService } from \"src/app/core/http/publicMenu.service\";\nimport { Local } from \"src/app/core/models/local.model\";\nimport { SeccionesStateService } from \"src/app/core/state/secciones-state.service\";\nimport { LocalStateService } from \"src/app/core/state/local-state.service\";\nimport { SeccionMenu } from \"src/app/core/models/seccion-menu.model\";\n\n\n\n@Injectable()\nexport class PublicMenuFacade{\n    constructor(\n        private menuConfigurationService: PublicMenuService,\n        private seccionesStateService:SeccionesStateService,\n        private localStateService:LocalStateService){}\n\n    public getMenuDigital(nameUrl:string):void{\n        this.menuConfigurationService.getMenu(nameUrl)\n        .pipe(\n           tap((local) =>{\n               if(local){\n                    console.log('Local devuelto:', local, 'Secciones:', local.secciones);\n                    this.localStateService.setLocal(local);\n                    this.seccionesStateService.setSecciones(local.secciones);\n               }\n                \n           }) \n        )\n        .subscribe(\n            (local) => console.log('Local devuelto:', local)\n        )\n    }\n\n    public getSeccionesState():Observable<SeccionMenu[]>{\n        return this.seccionesStateService.secciones$;\n    }\n\n    public getLocalState():Observable<Local>{\n        return this.localStateService.local$;\n    }\n\n    /*\n    public getSeccionesPrueba():void{\n    \n        this.seccionesStateService.setSecciones(\n            [\n                {\n                    _id:\"76676\",\n                    titulo:\"Promociones\",\n                    descripcion:\"Descuentos temporales\",\n                    puesto:1,\n                    menuitems:[\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76676\",\n                            nombre:\"2x1 Familiar\",\n                            descripcion:\"2 Pizzas familiares por 1\",\n                            detalle_factura:\"2 Pizzas tamaño familiar\",\n                            imagenUrl:\"\",\n                            precio:78000,\n                            tipo:2,\n                            promocion:{\n                                _id:\"878789\",\n                                precioActual:78000,\n                                precioAnterior:97000,\n                                descuento:0.2\n                            }\n                        },\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76676\",\n                            nombre:\"2x1 Calzones\",\n                            descripcion:\"2 Calzones de los sabores que desee\",\n                            detalle_factura:\"2 Calzones\",\n                            imagenUrl:\"\",\n                            precio:68000,\n                            tipo:2,\n                            promocion:{\n                                _id:\"878791\",\n                                precioActual:68000,\n                                precioAnterior:99000,\n                                descuento:0.25\n                            }\n                        }\n                    ]\n                },\n                {\n                    _id:\"76677\",\n                    titulo:\"Pizzas\",\n                    descripcion:\"\",\n                    puesto:2,\n                    menuitems:[\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76677\",\n                            nombre:\"Pepperoni\",\n                            descripcion:\"Riquisima masa hecha de harina, con salsa de tomate y sabrosos pepperonis\",\n                            detalle_factura:\"Pizza\",\n                            precio:78000,\n                            tipo:1,\n                            tamanos:[\n                                {\n                                    _id:\"8989898\",\n                                    tamano:\"Grande\",\n                                    imagenUrl:\"\",\n                                    pedazos:8,\n                                    comensales:3,\n                                    cantsabores:2,\n                                    precio:78000,\n                                    predeterminado:true,\n                                    toppings:[\n                                        {\n                                            _id:\"5656565\",\n                                            nombre:\"Borde relleno\",\n                                            descripcion:\"Exquisito borde de queso catupiri\",\n                                            precio: 5000\n\n                                        },\n                                        {\n                                            _id:\"5656567\",\n                                            nombre:\"Extra Queso\",\n                                            descripcion:\"300 gs de queso extra en tu Pizza\",\n                                            precio: 5000\n                                        }\n\n                                    ]\n                                },\n                                {\n                                    _id:\"8989865\",\n                                    tamano:\"Familiar\",\n                                    imagenUrl:\"\",\n                                    pedazos:12,\n                                    comensales:4,\n                                    cantsabores:3,\n                                    precio:88000,\n                                    predeterminado:false,\n                                    toppings:[\n                                        {\n                                            _id:\"5656565\",\n                                            nombre:\"Borde relleno\",\n                                            descripcion:\"Exquisito borde de queso catupiri\",\n                                            precio: 6000\n\n                                        },\n                                        {\n                                            _id:\"5656567\",\n                                            nombre:\"Extra Queso\",\n                                            descripcion:\"400 gramos adicionales de queso extra en tu Pizza\",\n                                            precio: 6000\n                                        }\n\n                                    ]\n                                },\n                                {\n                                    _id:\"8989843\",\n                                    tamano:\"Gigante\",\n                                    imagenUrl:\"\",\n                                    pedazos:16,\n                                    comensales:4,\n                                    cantsabores:3,\n                                    precio:98000,\n                                    predeterminado:false,\n                                    toppings:[\n                                        {\n                                            _id:\"5656565\",\n                                            nombre:\"Borde relleno\",\n                                            descripcion:\"Exquisito borde de queso catupiri\",\n                                            precio: 6000\n\n                                        },\n                                        {\n                                            _id:\"5656567\",\n                                            nombre:\"Extra Queso\",\n                                            descripcion:\"500 gs de queso extra en tu Pizza\",\n                                            precio: 7000\n                                        }\n\n                                    ]\n                                }\n                            ],\n                            sabores:[\n                                {\n                                    _id:\"6767676\",\n                                    nombre:\"Pepperoni\",\n                                    descripcion:\"Riquisima masa con salsa de tomate exclusiva y pepperoni\",\n                                    costoAdicional:[\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:2,\n                                            costo_adicional: 3000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:1,\n                                            costo_adicional: 6000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989865\",\n                                            cantsabores:3,\n                                            costo_adicional: 4000,\n                                            operacion:1\n                                        }\n                                    ]\n                                },\n                                {\n                                    _id:\"09097878\",\n                                    nombre:\"Española\",\n                                    descripcion:\"Riquisima masa con salsa de tomate exclusiva y pepperoni\",\n                                    costoAdicional:[\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:2,\n                                            costo_adicional: 6000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989898\",\n                                            cantsabores:1,\n                                            costo_adicional: 8000,\n                                            operacion:1\n                                        },\n                                        {\n                                            _id:\"7676767\",\n                                            tamano: \"8989865\",\n                                            cantsabores:3,\n                                            costo_adicional: 6000,\n                                            operacion:1\n                                        }\n                                    ]\n                                },\n                                {\n                                    _id:\"09097878\",\n                                    nombre:\"Napolitana\",\n                                    descripcion:\"Riquisima masa con salsa de tomate exclusiva y pepperoni\"\n                                }\n                            ]\n                            \n                            \n                        }\n                    ]\n                },\n                {\n                    _id:\"76678\",\n                    titulo:\"Calzones\",\n                    descripcion:\"\",\n                    puesto:3,\n                    menuitems:[\n                        {\n                            _id: \"8989898\",\n                            seccion:\"76678\",\n                            nombre:\"Napolitano\",\n                            descripcion:\"Riquisima masa hecha de harina, con salsa de tomate y sabrosos pepperonis\",\n                            detalle_factura:\"Calzone sabor napolitano\",\n                            precio:78000,\n                            tipo:2\n                        }\n                    ]\n                }\n            ]\n        )\n    \n    \n    \n    \n    \n    \n    }\n    */\n}","import { Component, OnDestroy, OnInit, QueryList, ViewChild, ViewChildren } from '@angular/core';\nimport { MatCheckbox } from '@angular/material/checkbox';\nimport { ActivatedRoute } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\nimport { shareReplay } from 'rxjs/operators';\nimport { Local } from 'src/app/core/models/local.model';\nimport { MenuItemPersonalizado } from 'src/app/core/models/menuitem-personalizado.model';\nimport { MenuItem } from 'src/app/core/models/menuItem.model';\nimport { SeccionMenu } from 'src/app/core/models/seccion-menu.model';\nimport { PublicMenuFacade } from '../../services/publicMenuFacade.service';\n\n@Component({\n  selector: 'app-main-menu',\n  templateUrl: './main-menu.component.html',\n  styleUrls: ['./main-menu.component.scss']\n})\nexport class MainMenuComponent implements OnInit, OnDestroy {\n  nombrelocal:string;\n  private sub:Subscription;\n  private subLocalState:Subscription;\n\n  //Secciones del Menu\n  secciones$:Observable<SeccionMenu[]>;\n\n  //Nombre del local\n  local$:Observable<Local>;\n\n  //MenuItem\n  cantidad:number=1;//Selector de cantidades de un MenuItem\n  imagenAlternativa=\"../../../../assets/camara.png\";\n\n  //Seleccion de tamaños\n  tamanos:boolean[];\n  @ViewChildren('tamanocheckbox') components:QueryList<MatCheckbox>;\n\n  //\n  lista_detalles:MenuItemPersonalizado = {};\n\n  constructor(private route: ActivatedRoute, private publicMenuFacade:PublicMenuFacade) {\n\n   }\n  \n\n  ngOnInit(): void {\n    //console.log('MainMenu, ngOnInit:', this.route.snapshot.params);\n    this.sub = this.route.params.subscribe(params => {\n      const nombrelocalParam = params['nombrelocal'];\n      this.publicMenuFacade.getMenuDigital(nombrelocalParam);\n      //this.publicMenuFacade.getSeccionesPrueba();\n    });\n    this.tamanos = new Array<boolean>();\n    this.secciones$ = this.publicMenuFacade.getSeccionesState()\n                      .pipe(shareReplay(1));\n    \n    \n    this.local$ = this.publicMenuFacade.getLocalState();\n    this.subLocalState = this.local$.subscribe(\n      (local) => {\n        if(local){\n          this.nombrelocal = local.nombreDelLocal;\n        }\n      }\n    )\n  }\n\n  ngAfterViewInit(){\n    console.log(this.components.toArray());\n  }\n  public agregar_carrito(menuitem:MenuItem){\n    console.log('Agregar a carrito,', menuitem, 'cantidad:', this.cantidad);\n  }\n\n  \n  public handleMinus() {\n    this.cantidad--;  \n  }\n  public handlePlus() {\n    this.cantidad++;    \n  }\n\n  ngOnDestroy(): void {\n    this.sub.unsubscribe();\n    this.subLocalState.unsubscribe();\n  }\n}\n","<div fxLayout=\"row\" fxLayoutAlign=\"space-between center\" class=\"toolbar\">\n    <h1 fxFlex=\"50%\" class=\"toolbar_titulo\">MenuDigital de \"{{nombrelocal}}\"</h1>\n    <button mat-icon-button class=\"toolbar_cartButton\" aria-label=\"Icono del carrito\">\n        <mat-icon>shopping_cart</mat-icon>\n    </button>\n    \n</div>\n<div class=\"container\">\n        <div class=\"categoria\" *ngFor=\"let seccion of secciones$ | async\">\n            <h2>{{seccion.titulo}}</h2>\n            <div fxLayout=\"row wrap\" fxLayoutGap=\"30px\" class=\"menuitem\" >\n                <ng-container *ngFor=\"let menuitem of seccion.menuitems\">\n                    <mat-card fxFlex=\"25%\" class=\"mat-elevation-z8\">\n                        <mat-card-header>\n                            <mat-card-title>\n                                {{menuitem.nombre | titlecase}}\n                            </mat-card-title>\n                        </mat-card-header>\n                        <img mat-card-image src=\"{{menuitem.imagenUrl && menuitem.imagenUrl.length > 0 ? menuitem.imagenUrl: imagenAlternativa}}\">\n                        \n                        \n                        <mat-card-actions>\n                            <div fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n                                <div class=\"wrapper\" fxFlex=50%>\n                                    <button class=\"plusminus\" (click)=\"handleMinus()\">-</button>\n                                    <input type=\"number\" class=\"num\" [value]=\"cantidad\"  />\n                                    <button class=\"plusminus\" (click)=\"handlePlus()\">+</button>\n                                </div>\n                                <button fxFlex=50% class=\"button_agregar\" (click)=\"agregar_carrito(menuitem)\" mat-raised-button>Agregar</button>\n                            </div>    \n                              \n                        </mat-card-actions>\n                    </mat-card>\n                </ng-container>    \n            </div>\n             \n        </div>\n        \n    \n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { MainMenuComponent } from './container/main-menu/main-menu.component';\n\nconst routes:Routes = [\n    {\n        path: '',\n        component: MainMenuComponent\n    }\n]\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule]\n  })\nexport class PublicMenuRoutingModule { }","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MainMenuComponent } from './container/main-menu/main-menu.component';\nimport { PublicMenuRoutingModule } from './public-menu-routing.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { PublicMenuFacade } from './services/publicMenuFacade.service';\n\n\n\n@NgModule({\n  declarations: [MainMenuComponent],\n  imports: [\n    CommonModule,\n    PublicMenuRoutingModule,\n    SharedModule\n  ],\n  providers:[\n    PublicMenuFacade\n  ]\n})\nexport class PublicMenuModule { }\n"]}